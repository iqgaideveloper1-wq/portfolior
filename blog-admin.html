<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Blog Admin - Ranjithkumar Baluchamy</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  
  <style>
    body{font-family:"Open Sans",sans-serif;color:#272829}
    a{color:#149ddd;text-decoration:none}
    a:hover{color:#37b3ed;text-decoration:none}
    h1,h2,h3,h4,h5,h6{font-family:"Raleway",sans-serif}
    #main{margin-left:100px}
    @media (max-width:991px){#main{margin-left:0}}
    #preloader{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;overflow:hidden;background:#fff}
    #preloader:before{content:"";position:fixed;top:calc(50% - 30px);left:calc(50% - 30px);border:6px solid #149ddd;border-top-color:#ecf8fe;border-radius:50%;width:60px;height:60px;animation:animate-preloader 1s linear infinite}
    @keyframes animate-preloader{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    .admin-page{padding:80px 0}
    .breadcrumbs{padding:15px 0;background:#f5f8fd;min-height:40px;margin-top:60px}
    .breadcrumbs h2{font-size:24px;font-weight:300}
    .breadcrumbs ol{display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0;font-size:14px}
    .breadcrumbs ol li+li{padding-left:10px}
    .breadcrumbs ol li+li::before{display:inline-block;padding-right:10px;color:#6c757d;content:"/"}
    .mobile-nav-toggle{position:fixed;right:15px;top:15px;z-index:9998;border:0;font-size:24px;transition:all .4s;outline:none!important;background-color:#149ddd;color:#fff;width:40px;height:40px;display:none;align-items:center;justify-content:center;line-height:0;border-radius:50px;cursor:pointer}@media (max-width:991px){.mobile-nav-toggle{display:flex}.navbar{position:fixed;top:0;right:0;left:0;bottom:0;background:rgba(5,13,24,.9);transition:all .4s;z-index:9997;transform:translateX(100%);padding:30px;overflow-y:auto}.mobile-nav-active .navbar{transform:translateX(0)}.navbar ul{display:block;position:absolute;top:55px;right:15px;bottom:15px;left:15px;padding:10px 0;border-radius:10px;background-color:#fff;overflow-y:auto;transition:.3s;z-index:9995}.navbar .nav-link{display:flex;align-items:center;justify-content:flex-start;padding:10px 20px;margin:5px 15px;width:auto;height:auto;border-radius:4px;font-size:15px;color:#45505b;background:0 0;box-shadow:none}.navbar .nav-link i{font-size:16px;margin-right:10px;color:#45505b}.navbar .nav-link span{display:inline}.navbar .nav-link:hover,.navbar .nav-link.active{color:#149ddd}.navbar .nav-link:hover i,.navbar .nav-link.active i{color:#149ddd}}
    #footer{padding:25px 0;background:#f5f8fd;text-align:center;font-size:14px}
  </style>
</head>

<body>
  <div id="preloader"></div>
  <i class="bi bi-list mobile-nav-toggle"></i>
  <nav id="navbar" class="navbar">
    <ul>
      <li><a href="index.html#hero" class="nav-link" title="Home"><i class='bx bx-home'></i> <span>Home</span></a></li>
      <li><a href="index.html#about" class="nav-link" title="About"><i class='bx bx-user'></i> <span>About</span></a></li>
      <li><a href="index.html#skills" class="nav-link" title="Skills"><i class='bx bx-code-alt'></i> <span>Skills</span></a></li>
      <li><a href="index.html#resume" class="nav-link" title="Resume"><i class='bx bx-file-blank'></i> <span>Resume</span></a></li>
      <li><a href="index.html#services" class="nav-link" title="Services"><i class='bx bx-server'></i> <span>Services</span></a></li>
      <li><a href="index.html#portfolio" class="nav-link" title="Portfolio"><i class='bx bx-book-content'></i> <span>Portfolio</span></a></li>
      <li><a href="index.html#achievements" class="nav-link" title="Achievements"><i class='bx bx-award'></i> <span>Achievements</span></a></li>
      <li><a href="index.html#testimonials" class="nav-link" title="Testimonials"><i class='bx bx-comment-detail'></i> <span>Testimonials</span></a></li>
      <li><a href="index.html#contact" class="nav-link" title="Contact"><i class='bx bx-envelope'></i> <span>Contact</span></a></li>
      <li><a href="blog.html" class="nav-link" title="Blog"><i class='bx bx-news'></i> <span>Blog</span></a></li>
      <li><a href="blog-admin.html" class="nav-link active" title="Blog Admin"><i class='bx bx-edit'></i> <span>Blog Admin</span></a></li>
    </ul>
  </nav>

  <main id="main">
    <section class="breadcrumbs">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Blog Admin</h2>
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>Blog Admin</li>
          </ol>
        </div>
      </div>
    </section>

    <section class="admin-page">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="mb-0">Manage Blog Posts</h3>
            <a href="blog-edit.html" class="btn btn-primary">Add New Post</a>
        </div>
        <div class="alert alert-info small" role="alert">
          <i class="bi bi-info-circle-fill"></i> <strong>Note:</strong> Blog posts are saved in your browser's local storage. Changes will only be visible on this device and browser.
        </div>
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Title</th>
                                <th scope="col">Author</th>
                                <th scope="col">Date</th>
                                <th scope="col" class="text-end">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="posts-table-body">
                            <!-- Posts will be loaded here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
      </div>
    </section>
  </main>

  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>MyResume</span></strong>
      </div>
      <div class="credits">
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="blog-data.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      "use strict";
      const select = (el, all = false) => all ? [...document.querySelectorAll(el)] : document.querySelector(el);
      const on = (type, el, listener, all = false) => {
        let selectEl = select(el, all);
        if (selectEl) {
          if (all) {
            selectEl.forEach(e => e.addEventListener(type, listener));
          } else {
            selectEl.addEventListener(type, listener);
          }
        }
      };
      
      let preloader = select('#preloader');
      if (preloader) {
        window.addEventListener('load', () => {
          preloader.remove();
        });
      }
      
      on('click', '.mobile-nav-toggle', function(e) {
        select('body').classList.toggle('mobile-nav-active');
        this.classList.toggle('bi-list');
        this.classList.toggle('bi-x');
      });

      // --- BLOG ADMIN LOGIC ---
      const tableBody = select('#posts-table-body');

      function getBlogData() {
        let posts = localStorage.getItem('blogPosts');
        if (!posts) {
          localStorage.setItem('blogPosts', JSON.stringify(blogData));
          return blogData;
        }
        return JSON.parse(posts);
      }

      function saveBlogData(posts) {
        localStorage.setItem('blogPosts', JSON.stringify(posts));
      }

      function renderTable() {
        const posts = getBlogData();
        tableBody.innerHTML = '';

        if(posts.length === 0) {
            tableBody.innerHTML = '<tr><td colspan="4" class="text-center">No posts found.</td></tr>';
            return;
        }

        posts.forEach(post => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${post.title}</td>
            <td>${post.author}</td>
            <td>${post.date}</td>
            <td class="text-end">
              <a href="blog-edit.html?id=${post.id}" class="btn btn-sm btn-outline-primary">Edit</a>
              <button class="btn btn-sm btn-outline-danger" data-id="${post.id}">Delete</button>
            </td>
          `;
          tableBody.appendChild(row);
        });

        // Add event listeners to delete buttons
        const deleteButtons = select('.btn-outline-danger', true);
        deleteButtons.forEach(button => {
          button.addEventListener('click', handleDelete);
        });
      }

      function handleDelete(event) {
        const postId = parseInt(event.target.dataset.id);
        if (confirm('Are you sure you want to delete this post? This action cannot be undone.')) {
          let posts = getBlogData();
          posts = posts.filter(post => post.id !== postId);
          saveBlogData(posts);
          renderTable();
        }
      }

      if (tableBody) {
        renderTable();
      }
    });
  </script>
</body>
</html>